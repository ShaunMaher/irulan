// This will enable all verbose messages generated by this file (remember that
//  the irulan server presents this file to the browser as the plugin name).
//console.verbose.filterObjects.push("irulankeepass.js");

irulanclient.run(['Apps', function(Apps) {
  Apps.push({
    name: 'irulankeepass',
    enabled: true,
    launcher: {
      label: 'KeePass',
      icon: 'some url',
      // Tooltip
      title: 'Use the KeePass password manager',
      // What will happen when the user clicks the launcher button?
      click: function() {
        console.verbose("switch to 'irulankeepass' app.");

        //Pages.show('wiki/') ??
      }
    },
    // Each application will have the ability to specify some colors that will
    //  be applied to the global CSS (e.g. Navbar color) so the user has a clear
    //  indication that they have move to a new app
    theme: {
      colors: {
        color_1: '#FFFFFF',
        color_2: '#000000',
      },
      // The application can also have it's own background image (wallpaper)
      background: {
        image: 'some url',
        color: '#FFFFFF',
      },
    }
  })
  console.verbose(Apps);
}]);

// Register our ability to handle page requests in the "wiki/" name space
irulanclient.run(['WorkspaceProviders', 'WikiPage', 'Pages', function(WorkspaceProviders, WikiPage, Pages) {
  // How can I push the factory?
  WorkspaceProviders.push({
    namespace: 'keepass/',
    factory: WikiPage,
    workspace: Pages,
  });
}]);
